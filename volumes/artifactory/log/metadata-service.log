2021-06-16T09:05:07.074Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 5 seconds with 2m0s timeout [init]
2021-06-16T09:05:12.161Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 10 seconds with 2m0s timeout [init]
2021-06-16T09:05:17.172Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 15 seconds with 2m0s timeout [init]
2021-06-16T09:05:22.394Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 20 seconds with 2m0s timeout [init]
2021-06-16T09:05:27.622Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 25 seconds with 2m0s timeout [init]
2021-06-16T09:05:32.975Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 30 seconds with 2m0s timeout [init]
2021-06-16T09:05:37.091Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 35 seconds with 2m0s timeout [init]
2021-06-16T09:05:42.786Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:149          ] [main                ] - Master key is missing. Pending for 40 seconds with 2m0s timeout [init]
2021-06-16T09:05:48.043Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:163          ] [main                ] - Cluster join: Join key is missing. Pending for 45 seconds with 2m0s timeout [init]
2021-06-16T09:05:52.112Z [jfmd ] [INFO ] [1047995cca9df4ad] [security_keys.go:163          ] [main                ] - Cluster join: Join key is missing. Pending for 50 seconds with 2m0s timeout [init]
2021-06-16T09:05:57.274Z [jfmd ] [INFO ] [1047995cca9df4ad] [database_bearer.go:101        ] [main                ] - Connecting to (db config: {sqlite /opt/jfrog/artifactory/var/data/metadata/sqlite.db?_fk=yes&_busy_timeout=5000&_txlock=immediate&cache=shared}) [database]
2021-06-16T09:05:57.541Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:60                ] [main                ] - Applying 45 migrations files [database]
2021-06-16T09:05:57.600Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v001_packages.sql successfully applied (4 statements) [database]
2021-06-16T09:05:57.680Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v002_versions.sql successfully applied (5 statements) [database]
2021-06-16T09:05:57.732Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v003_package_qualifiers.sql successfully applied (2 statements) [database]
2021-06-16T09:05:57.792Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v004_package_user_properties.sql successfully applied (3 statements) [database]
2021-06-16T09:05:57.871Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v005_package_tags.sql successfully applied (2 statements) [database]
2021-06-16T09:05:57.892Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v006_package_stats.sql successfully applied (1 statements) [database]
2021-06-16T09:05:57.913Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v007_sources.sql successfully applied (2 statements) [database]
2021-06-16T09:05:57.942Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v008_package_info_sources.sql successfully applied (3 statements) [database]
2021-06-16T09:05:57.972Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v009_servers.sql successfully applied (2 statements) [database]
2021-06-16T09:05:58.388Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v010_version_qualifiers.sql successfully applied (3 statements) [database]
2021-06-16T09:05:58.627Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v011_version_user_properties.sql successfully applied (3 statements) [database]
2021-06-16T09:05:58.737Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v012_version_tags.sql successfully applied (3 statements) [database]
2021-06-16T09:05:58.820Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v013_version_stats.sql successfully applied (1 statements) [database]
2021-06-16T09:05:58.877Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v014_licenses.sql successfully applied (2 statements) [database]
2021-06-16T09:05:58.968Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v015_files.sql successfully applied (5 statements) [database]
2021-06-16T09:05:59.032Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v016_file_qualifiers.sql successfully applied (3 statements) [database]
2021-06-16T09:05:59.127Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v017_package_licenses.sql successfully applied (3 statements) [database]
2021-06-16T09:05:59.188Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v018_version_licenses.sql successfully applied (3 statements) [database]
2021-06-16T09:05:59.235Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v019_files_versions.sql successfully applied (3 statements) [database]
2021-06-16T09:05:59.295Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v020_repo.sql successfully applied (2 statements) [database]
2021-06-16T09:05:59.370Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v021_lead_paths.sql successfully applied (4 statements) [database]
2021-06-16T09:05:59.406Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v022_package_descriptions.sql successfully applied (1 statements) [database]
2021-06-16T09:05:59.442Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v023_contributors.sql successfully applied (2 statements) [database]
2021-06-16T09:05:59.467Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v024_version_contributors.sql successfully applied (3 statements) [database]
2021-06-16T09:05:59.502Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v025_sharedconfigs.sql successfully applied (2 statements) [database]
2021-06-16T09:05:59.541Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v026_version_vulns.sql successfully applied (1 statements) [database]
2021-06-16T09:05:59.628Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v027_package_vulns.sql successfully applied (1 statements) [database]
2021-06-16T09:05:59.661Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v028_versions_ordinal_index.sql successfully applied (1 statements) [database]
2021-06-16T09:05:59.724Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v029_qualifier_user_prop_length.sql successfully applied (0 statements) [database]
2021-06-16T09:05:59.743Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v030_version_addcolumn_size.sql successfully applied (1 statements) [database]
2021-06-16T09:05:59.797Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v031_package_add_base_model_complete.sql successfully applied (1 statements) [database]
2021-06-16T09:05:59.845Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v032_rename_stats_columns.sql successfully applied (3 statements) [database]
2021-06-16T09:05:59.869Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v033_rename_size_column.sql successfully applied (1 statements) [database]
2021-06-16T09:05:59.985Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v034_ver_stats_fk_ver_repos_fk.sql successfully applied (11 statements) [database]
2021-06-16T09:06:00.059Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v035_files_unique_name_sha256.sql successfully applied (4 statements) [database]
2021-06-16T09:06:00.092Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v036_version_add_modified.sql successfully applied (1 statements) [database]
2021-06-16T09:06:00.137Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v037_version_add_base_model_complete.sql successfully applied (1 statements) [database]
2021-06-16T09:06:00.161Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v038_file_targets.sql successfully applied (2 statements) [database]
2021-06-16T09:06:00.188Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v039_file_targets_fk.sql successfully applied (1 statements) [database]
2021-06-16T09:06:00.206Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v042_async_data_converter.sql successfully applied (5 statements) [database]
2021-06-16T09:06:00.228Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v043_add_mark_for_deletion.sql successfully applied (3 statements) [database]
2021-06-16T09:06:00.256Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v044_add_dependant_task.sql successfully applied (1 statements) [database]
2021-06-16T09:06:00.301Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v045_delete_reorder_prerelease_version_task.sql successfully applied (1 statements) [database]
2021-06-16T09:06:00.327Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v046_add_cvss3.sql successfully applied (2 statements) [database]
2021-06-16T09:06:00.360Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:221               ] [main                ] - Migration v047_reorder_task_temp_table.sql successfully applied (2 statements) [database]
2021-06-16T09:06:00.387Z [jfmd ] [INFO ] [1047995cca9df4ad] [migrator.go:69                ] [main                ] - Applied 110 database migrations statements in 2.845216231s seconds [database]
2021-06-16T09:06:00.902Z [jfmd ] [INFO ] [1047995cca9df4ad] [application.go:68             ] [main                ] - Metadata (jfmd) service initialization started. Version: 7.19.4 Revision: a650c79d3af PID: 3450 Home: /opt/jfrog/artifactory/var [app_initializer]
2021-06-16T09:06:00.949Z [jfmd ] [INFO ] [1047995cca9df4ad] [server_bearer.go:171          ] [main                ] - Created service_id and pushed to store: jfmd@01f8a13z28db6kgy5vn7gfnqt1 [ServerInit]
2021-06-16T09:06:05.273Z [jfmd ] [INFO ] [1047995cca9df4ad] [accessclient.go:57            ] [main                ] - Cluster join: Retry 5: Service registry ping failed, will retry. Error: Error while trying to connect to local router at address 'http://localhost:8046/access': Get "http://localhost:8046/access/api/v1/system/ping": dial tcp 127.0.0.1:8046: connect: connection refused [access_client]
2021-06-16T09:06:09.597Z [jfmd ] [INFO ] [1047995cca9df4ad] [accessclient.go:57            ] [main                ] - Cluster join: Successfully joined the cluster [access_client]
2021-06-16T09:06:09.598Z [jfmd ] [INFO ] [1047995cca9df4ad] [accessclient.go:57            ] [main                ] - Cluster join: executing Router register at: localhost:8046 for service id jfmd@01f8a13z28db6kgy5vn7gfnqt1 [access_client]
2021-06-16T09:06:09.757Z [jfmd ] [INFO ] [1047995cca9df4ad] [async_converter.go:194        ] [main                ] - Starting async converter routine [async_converter] [workerNumber][1]
2021-06-16T09:06:09.761Z [jfmd ] [INFO ] [1047995cca9df4ad] [router_middlewares.go:55      ] [main                ] - 
Metadata Info
========================

Shared.NewRelic.AppName                              | 
Shared.NewRelic.EnableDebugLog                       | false
Logging.Application.FilePath                         | metadata-service.log
Logging.Request.Rotation.MaxFiles                    | 10
Keys.ReadIntervalDuration                            | 1s
Shared.NewRelic.Enabled                              | false
Logging.Application.Rotation.MaxSizeMb               | 25
Logging.Application.Rotation.MaxFiles                | 10
Logging.Request.FilePath                             | metadata-request.log
Logging.Request.Rotation.MaxSizeMb                   | 25
Logging.Request.Rotation.MaxAgeDays                  | 365
Logging.Request.Rotation.Compress                    | true
AccessClient.JoinTimeout                             | 3m0s
Port                                                 | 8086
Logging.Application.Level                            | info
Logging.Application.Rotation.MaxAgeDays              | 365
Logging.Application.Rotation.Compress                | true
Logging.Application.Rotation.IntervalSeconds         | 0
Logging.Request.Rotation.IntervalSeconds             | 0
Keys.ReadAttempts                                    | 120
Profiling.Enabled                                    | false
Shared.NewRelic.DistributedTracerEnabled             | true
Database.Type                                        | 1
AccessClient.Url                                     | http://localhost:8081/access

2021-06-16T09:06:09.761Z [jfmd ] [INFO ] [1047995cca9df4ad] [router_middlewares.go:56      ] [main                ] - Metadata (jfmd) service initialization completed in 8.857 seconds. Listening on port: 8086 [router]
2021-06-16T09:06:11.847Z [jfmd ] [WARN ] [1047995cca9df4ad] [versions_package_id_ordinal_in] [main                ] - Running DB indexes [md_version_pkgid_ordinal_idx,md_versions_package_id_idx,md_versions_ordinal_idx] maintenance in the background, it might cause some slowness in the Metadata service [BatchEndKey][1] [BatchKey][versionsPackageIdOrdinalIndexTask] [BatchStartKey][0] [versions_package_id_ordinal_index_task] [workerNumber][1]
2021-06-16T09:06:11.849Z [jfmd ] [WARN ] [1047995cca9df4ad] [versions_package_id_ordinal_in] [main                ] - Finished with DB indexes [[md_version_pkgid_ordinal_idx md_versions_package_id_idx md_versions_ordinal_idx]] background maintenance, Metadata service is back to normal [BatchEndKey][1] [BatchKey][versionsPackageIdOrdinalIndexTask] [BatchStartKey][0] [versions_package_id_ordinal_index_task] [workerNumber][1]
2021-06-16T09:06:13.876Z [jfmd ] [WARN ] [1047995cca9df4ad] [ver_repos_lead_file_path_index] [main                ] - Running DB index [md_ver_repos_lead_file_pth_idx] maintenance in the background, it might cause some slowness in the Metadata service [BatchEndKey][1] [BatchKey][verReposLeadFilePathIndexIndexTask] [BatchStartKey][0] [ver_repos_lead_file_path_index_task] [workerNumber][1]
2021-06-16T09:06:13.877Z [jfmd ] [WARN ] [1047995cca9df4ad] [ver_repos_lead_file_path_index] [main                ] - Finished with DB index [md_ver_repos_lead_file_pth_idx] background maintenance, Metadata service is back to normal [BatchEndKey][1] [BatchKey][verReposLeadFilePathIndexIndexTask] [BatchStartKey][0] [ver_repos_lead_file_path_index_task] [workerNumber][1]
